---
    - hosts: ansible-server
      become: true
    
      tasks:
      - name: clone from github
        command: git clone https://github.com/biFebriansyah/serv-user.git
        args:
            chdir: /opt/project
            
      - name: create docker image using war file
        command: docker build -t simple-project-image:latest .
        args:
          chdir: /opt/project/serv-user
    
      - name: create tag to image
        command: docker tag simple-project-image bukanebi/simple-project-image
    
      - name: push image on to dockerhub
        command: docker push bukanebi/simple-project-image
    
      - name: remove docker images form ansible server
        command: docker rmi simple-devops-image:latest bukanebi/simple-devops-image
        ignore_errors: yes
